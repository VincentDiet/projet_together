import{h as q,a as M,_ as T}from"./activityStore-dcda880c.js";import{S as Z}from"./categoryStore-6b1a5a5c.js";import{d as L,s as k,m as n,o as h,c as B,w as V,a as t,t as s,g as u,b as H,u as j,e as v,h as z,F as C}from"./app-bc478766.js";import"./ResponsiveNavLink-dda4ae60.js";const m=(e,a)=>{const l=q(e);return l.locale("fr"),l.format(a)},D={class:"relative -mx-8 -mt-10 bg-black h-96 w-screen"},N={class:"z-10 w-screen absolute h-16 bg-opacity-25 text-zinc-900 bg-black flex items-center justify-between px-4"},R=["href"],S=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-7 h-7 text-white",viewBox:"0 0 24 24"},[u(" > "),t("path",{fill:"currentColor",d:"m10.875 19.3l-6.6-6.6q-.15-.15-.213-.325T4 12q0-.2.063-.375t.212-.325l6.6-6.6q.275-.275.688-.287t.712.287q.3.275.313.688T12.3 6.1L7.4 11h11.175q.425 0 .713.288t.287.712q0 .425-.287.713t-.713.287H7.4l4.9 4.9q.275.275.288.7t-.288.7q-.275.3-.7.3t-.725-.3Z"})],-1),I=[S],F=t("div",{class:"flex items-center"},[t("div",{class:"bg-white p-2 rounded-full"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M5 21V5q0-.825.588-1.413T7 3h10q.825 0 1.413.588T19 5v16l-7-3l-7 3Zm2-3.05l5-2.15l5 2.15V5H7v12.95ZM7 5h10H7Z"})])]),t("div",{class:"bg-white p-2 rounded-full m-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M6 22q-.825 0-1.413-.588T4 20V4q0-.825.588-1.413T6 2h8l6 6v4h-2V9h-5V4H6v16h6v2H6Zm0-2V4v16Zm12.3-5.475l1.075 1.075l-3.875 3.85v1.05h1.05l3.875-3.85l1.05 1.05l-4.3 4.3H14v-3.175l4.3-4.3Zm3.175 3.175L18.3 14.525l1.45-1.45q.275-.275.7-.275t.7.275l1.775 1.775q.275.275.275.7t-.275.7l-1.45 1.45Z"})])])],-1),P={class:"absolute z-10 bottom-0 mx-6 my-4"},O={class:"font-bold text-xl pl-2 mb-1"},A={class:"py-1 px-2 bg-white text-together-green font-bold w-auto rounded-lg text-sm inline-flex items-center"},E=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M12 12q.825 0 1.413-.588T14 10q0-.825-.588-1.413T12 8q-.825 0-1.413.588T10 10q0 .825.588 1.413T12 12Zm0 10q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2q3.175 0 5.588 2.225T20 10.2q0 2.5-1.988 5.438T12 22Z"})],-1),K=["src"],$={class:"w-screen h-16 bg-together-blue -mx-8 px-8 flex items-center justify-between"},G={class:"capitalize font-bold"},J={class:"font-bold text-together-blue bg-white py-0.5 px-3 rounded-lg text-sm"},Q={class:"mt-12"},U={class:"text-xl font-bold"},W={class:"py-4"},X={class:"flex items-center text-sm mt-10 mb-5"},Y=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mr-2 text-together-green",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M12 12q.825 0 1.413-.588T14 10q0-.825-.588-1.413T12 8q-.825 0-1.413.588T10 10q0 .825.588 1.413T12 12Zm0 10q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2q3.175 0 5.588 2.225T20 10.2q0 2.5-1.988 5.438T12 22Z"})],-1),tt=t("div",{class:"w-full h-36 bg-white flex items-center justify-center text-gray-900 rounded-xl uppercase"}," Map here ",-1),et={class:"my-12"},st=t("p",null,"Organisé par :",-1),at=["src"],it={class:"font-bold"},ot={class:"flex flex-wrap"},lt=["src"],ct=t("div",{class:"bg-together-green text-white font-bold rounded-full py-1.5 mt-3 px-8 inline-block mt-8"}," S'inscrire ",-1),vt={__name:"ShowActivity",props:{activity:Object},setup(e){const a=e,l=M(),r=L({latitude:null,longitude:null});k(async()=>{await l.fetchCoords(),r.value.latitude=l.coords.latitude,r.value.longitude=l.coords.longitude});const g=n(()=>a.activity.images.length===0?"https://via.placeholder.com/400":a.activity.images[0].url),w=n(()=>m(a.activity.start_datetime,"DD MMMM")),f=n(()=>m(a.activity.start_datetime,"DD MMMM, à HH[h]MM")),x=n(()=>{const d=Number(r.value.latitude)*(Math.PI/180),i=Number(r.value.longitude)*(Math.PI/180),o=Number(a.activity.latitude)*(Math.PI/180),y=Number(a.activity.longitude)*(Math.PI/180),p=o-d,b=y-i;return(2*6371*Math.asin(Math.sqrt(Math.pow(Math.sin(p/2),2)+Math.cos(d)*Math.cos(o)*Math.pow(Math.sin(b/2),2)))).toFixed(1)}),_=n(()=>{const c=a.activity.author.activities.flatMap(i=>i.participations.filter(o=>o.organizator_note).map(o=>o.organizator_note));return c.length?c.reduce((i,o)=>i+o)/c.length:0});return(c,d)=>(h(),B(T,{title:e.activity.title,class:"bg-gradient-to-b from-together-cyan-light to-together-cyan-dark"},{default:V(()=>[t("section",D,[t("div",N,[t("div",null,[t("a",{href:c.route("dashboard")},I,8,R)]),F]),t("div",P,[t("h1",O,s(e.activity.title),1),t("div",A,[E,u(" "+s(e.activity.city)+", à "+s(x.value)+" Km ",1)])]),t("img",{src:g.value,alt:"",class:"absolute object-cover h-96 w-screen"},null,8,K)]),t("div",$,[t("div",G,s(w.value),1),t("div",J,s(e.activity.category.name),1)]),t("section",Q,[t("h2",U,s(e.activity.title),1),t("p",W,s(f.value),1),t("p",null,s(e.activity.description),1),t("div",X,[Y,t("div",null,[t("p",null,s(e.activity.adress),1),t("p",null,s(e.activity.city),1)])]),tt,t("section",et,[st,t("img",{src:e.activity.author.profile_photo_path,alt:"",class:"rounded-full w-14 h-14 ml-2 m-4 object-cover"},null,8,at),t("span",it,s(e.activity.author.firstname)+" "+s(e.activity.author.lastname),1),H(j(Z),{rating:_.value,"star-size":15,"show-rating":!1},null,8,["rating"])]),t("section",null,[u(s(e.activity.participations.length)+"/"+s(e.activity.max_participants)+" participants ",1),t("div",ot,[(h(!0),v(C,null,z(e.activity.participations,i=>(h(),v("img",{key:i.id,src:i.participant.profile_photo_path,alt:"",class:"rounded-full w-10 h-10 m-2 shadow-lg object-cover"},null,8,lt))),128))])]),ct])]),_:1},8,["title"]))}};export{vt as default};
